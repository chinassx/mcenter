syntax = "proto3";

package infraboard.mcenter.notify;
option go_package = "github.com/infraboard/mcenter/apps/notify";


// 通知服务
service RPC {
    // 短信通知
	rpc SendSMS(SendSMSRequest) returns(SendResponse);
    // 语音通知
	rpc SendVoice(SendVoiceRequest) returns(SendVoiceResponse);
    // 邮件通知
    rpc SendMail(SendMailRequest) returns(SendResponse);
    // IM通知
    rpc SendIM(SendIMRequest) returns(SendResponse); 
}

message SendSMSRequest {
    // 短信模版的Id
    // @gotags: bson:"template_id" json:"template_id"
    string template_id = 1;
    // 模版参数
    // @gotags: bson:"template_params" json:"template_params"
    repeated string template_params = 2;
    // 手机号码
    // @gotags: bson:"phone_numbers" json:"phone_numbers"
    repeated string phone_numbers = 3;
}

message SendVoiceRequest {
    // 短信模版的Id
    // @gotags: bson:"template_id" json:"template_id"
    string template_id = 1;
    // 模版参数
    // @gotags: bson:"template_params" json:"template_params"
    repeated string template_params = 2;
    // 手机号码
    // @gotags: bson:"phone_numbers" json:"phone_numbers"
    repeated string phone_numbers = 3;
	// 播放次数，可选，最多3次，默认2次
    // @gotags: bson:"play_times" json:"play_times"
    uint64 play_times = 4;
	// 用户的 session 内容，腾讯 server 回包中会原样返回
    // @gotags: bson:"session_context" json:"session_context"
    string session_context = 5;
}

message SendVoiceResponse {
    // 呼叫Id
    // @gotags: bson:"call_id" json:"call_id"
    string call_id = 1;
	// 用户的 session 内容，腾讯 server 回包中会原样返回
    // @gotags: bson:"session_context" json:"session_context"
    string session_context = 2;
}

message SendMailRequest {
    // 邮件地址列表
    // @gotags: json:"to" bson:"to" validate:"required"
    repeated string to = 1;
    // 告警时标题
    // @gotags: json:"title" bson:"title" validate:"required"
    string title = 2;
    // 告警内容
    // @gotags: json:"content" bson:"content"
    string content = 3;
}

message SendIMRequest {
    // 邮件地址列表
    // @gotags: json:"to" bson:"to" validate:"required"
    repeated string to = 1;
    // 告警时标题
    // @gotags: json:"title" bson:"title" validate:"required"
    string title = 2;
    // 告警内容
    // @gotags: json:"content" bson:"content"
    string content = 3;
}

message SendResponse {

}